



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Unmanned Underwater Vehicle Simulator Documentation.">
      
      
        <link rel="canonical" href="https://uuvsimulator.github.io/packages/uuv_simulator/docs/tutorials/creating_new_dp_controller/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.2">
    
    
      
        <title>Creating new dynamic positioning controller - Unmanned Underwater Vehicle Simulator Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../../../../../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#creating-the-custom-controller-package" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://uuvsimulator.github.io/" title="Unmanned Underwater Vehicle Simulator Documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Unmanned Underwater Vehicle Simulator Documentation
            </span>
            <span class="md-header-nav__topic">
              Creating new dynamic positioning controller
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/uuvsimulator/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../../../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../intro/" title="UUV Simulator" class="md-tabs__link md-tabs__link--active">
          UUV Simulator
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../uuv_plume_simulator/intro/" title="Plume Simulator" class="md-tabs__link">
          Plume Simulator
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../rexrov2/intro/" title="RexROV 2" class="md-tabs__link">
          RexROV 2
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../eca_a9/intro/" title="ECA A9" class="md-tabs__link">
          ECA A9
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../lauv_gazebo/intro/" title="LAUV" class="md-tabs__link">
          LAUV
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../desistek_saga/intro/" title="Desistek SAGA ROV" class="md-tabs__link">
          Desistek SAGA ROV
        </a>
      
    </li>
  

      
        
      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../../../about/license/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://uuvsimulator.github.io/" title="Unmanned Underwater Vehicle Simulator Documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Unmanned Underwater Vehicle Simulator Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/uuvsimulator/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../../quick_start/" title="Quick start" class="md-nav__link">
      Quick start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../../api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      UUV Simulator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        UUV Simulator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Features
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../features/gazebo_worlds/" title="Gazebo worlds" class="md-nav__link">
      Gazebo worlds
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3" checked>
    
    <label class="md-nav__link" for="nav-5-3">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../config_thruster_manager/" title="Configuring the thruster manager" class="md-nav__link">
      Configuring the thruster manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create_new_vehicle/" title="Create new vehicle" class="md-nav__link">
      Create new vehicle
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Creating new dynamic positioning controller
      </label>
    
    <a href="./" title="Creating new dynamic positioning controller" class="md-nav__link md-nav__link--active">
      Creating new dynamic positioning controller
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-the-custom-controller-package" title="Creating the custom controller package" class="md-nav__link">
    Creating the custom controller package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-controller-node" title="Creating the controller node" class="md-nav__link">
    Creating the controller node
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-launch-files" title="Configuring the launch files" class="md-nav__link">
    Configuring the launch files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-package" title="Configuring the package" class="md-nav__link">
    Configuring the package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-simulation" title="Running the simulation" class="md-nav__link">
    Running the simulation
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../disturbances/" title="Generating disturbances" class="md-nav__link">
      Generating disturbances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../seabed_world/" title="Creating a new world with a custom seabed" class="md-nav__link">
      Creating a new world with a custom seabed
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_assistants/" title="uuv_assistants" class="md-nav__link">
      uuv_assistants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_auv_control_allocator/" title="uuv_auv_control_allocator" class="md-nav__link">
      uuv_auv_control_allocator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_control_cascaded_pid/" title="uuv_control_cascaded_pid" class="md-nav__link">
      uuv_control_cascaded_pid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_control_msgs/" title="uuv_control_msgs" class="md-nav__link">
      uuv_control_msgs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_control_utils/" title="uuv_control_utils" class="md-nav__link">
      uuv_control_utils
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_descriptions/" title="uuv_descriptions" class="md-nav__link">
      uuv_descriptions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_gazebo_plugins/" title="uuv_gazebo_plugins" class="md-nav__link">
      uuv_gazebo_plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_gazebo/" title="uuv_gazebo" class="md-nav__link">
      uuv_gazebo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_gazebo_ros_plugins/" title="uuv_gazebo_ros_plugins" class="md-nav__link">
      uuv_gazebo_ros_plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_gazebo_ros_plugins_msgs/" title="uuv_gazebo_ros_plugins_msgs" class="md-nav__link">
      uuv_gazebo_ros_plugins_msgs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_gazebo_worlds/" title="uuv_gazebo_worlds" class="md-nav__link">
      uuv_gazebo_worlds
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_sensor_ros_plugins/" title="uuv_sensor_ros_plugins" class="md-nav__link">
      uuv_sensor_ros_plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_sensor_ros_plugins_msgs/" title="uuv_sensor_ros_plugins_msgs" class="md-nav__link">
      uuv_sensor_ros_plugins_msgs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_teleop/" title="uuv_teleop" class="md-nav__link">
      uuv_teleop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_thruster_manager/" title="uuv_thruster_manager" class="md-nav__link">
      uuv_thruster_manager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_trajectory_control/" title="uuv_trajectory_control" class="md-nav__link">
      uuv_trajectory_control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_world_plugins/" title="uuv_world_plugins" class="md-nav__link">
      uuv_world_plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_world_ros_plugins/" title="uuv_world_ros_plugins" class="md-nav__link">
      uuv_world_ros_plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/uuv_world_ros_plugins_msgs/" title="uuv_world_ros_plugins_msgs" class="md-nav__link">
      uuv_world_ros_plugins_msgs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      C++ API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        C++ API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-1" type="checkbox" id="nav-5-5-1">
    
    <label class="md-nav__link" for="nav-5-5-1">
      uuv_gazebo_plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-5-1">
        uuv_gazebo_plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::BuoyantObject/" title="BuoyantObject" class="md-nav__link">
      BuoyantObject
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-1-2" type="checkbox" id="nav-5-5-1-2">
    
    <label class="md-nav__link" for="nav-5-5-1-2">
      Dynamics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-5-1-2">
        Dynamics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::Dynamics/" title="Dynamics" class="md-nav__link">
      Dynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::DynamicsFactory/" title="DynamicsFactory" class="md-nav__link">
      DynamicsFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::DynamicsFirstOrder/" title="DynamicsFirstOrder" class="md-nav__link">
      DynamicsFirstOrder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::DynamicsZeroOrder/" title="DynamicsZeroOrder" class="md-nav__link">
      DynamicsZeroOrder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ThrusterDynamicsBessa/" title="ThrusterDynamicsBessa" class="md-nav__link">
      ThrusterDynamicsBessa
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ThrusterDynamicsYoerger/" title="ThrusterDynamicsYoerger" class="md-nav__link">
      ThrusterDynamicsYoerger
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::FinPlugin/" title="FinPlugin" class="md-nav__link">
      FinPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-1-4" type="checkbox" id="nav-5-5-1-4">
    
    <label class="md-nav__link" for="nav-5-5-1-4">
      HydrodynamicModel
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-5-1-4">
        HydrodynamicModel
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HydrodynamicModel/" title="HydrodynamicModel" class="md-nav__link">
      HydrodynamicModel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HydrodynamicModelFactory/" title="HydrodynamicModelFactory" class="md-nav__link">
      HydrodynamicModelFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HMBox/" title="HMBox" class="md-nav__link">
      HMBox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HMCylinder/" title="HMCylinder" class="md-nav__link">
      HMCylinder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HMFossen/" title="HMFossen" class="md-nav__link">
      HMFossen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HMSphere/" title="HMSphere" class="md-nav__link">
      HMSphere
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::HMSpheroid/" title="HMSpheroid" class="md-nav__link">
      HMSpheroid
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-1-5" type="checkbox" id="nav-5-5-1-5">
    
    <label class="md-nav__link" for="nav-5-5-1-5">
      LiftDragModel
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-5-1-5">
        LiftDragModel
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::LiftDrag/" title="LiftDrag" class="md-nav__link">
      LiftDrag
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::LiftDragFactory/" title="LiftDragFactory" class="md-nav__link">
      LiftDragFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::LiftDragQuadratic/" title="LiftDragQuadratic" class="md-nav__link">
      LiftDragQuadratic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::LiftDragTwoLines/" title="LiftDragTwoLines" class="md-nav__link">
      LiftDragTwoLines
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-1-6" type="checkbox" id="nav-5-5-1-6">
    
    <label class="md-nav__link" for="nav-5-5-1-6">
      ThrusterConversionFcn
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-5-1-6">
        ThrusterConversionFcn
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ConversionFunction/" title="ConversionFunction" class="md-nav__link">
      ConversionFunction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ConversionFunctionFactory/" title="ConversionFunctionFactory" class="md-nav__link">
      ConversionFunctionFactory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ConversionFunctionBasic/" title="ConversionFunctionBasic" class="md-nav__link">
      ConversionFunctionBasic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ConversionFunctionBessa/" title="ConversionFunctionBessa" class="md-nav__link">
      ConversionFunctionBessa
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ConversionFunctionLinearInterp/" title="ConversionFunctionLinearInterp" class="md-nav__link">
      ConversionFunctionLinearInterp
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ThrusterPlugin/" title="ThrusterPlugin" class="md-nav__link">
      ThrusterPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::UnderwaterObjectPlugin/" title="UnderwaterObjectPlugin" class="md-nav__link">
      UnderwaterObjectPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-2" type="checkbox" id="nav-5-5-2">
    
    <label class="md-nav__link" for="nav-5-5-2">
      uuv_gazebo_ros_plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-5-2">
        uuv_gazebo_ros_plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::AccelerationsTestPlugin/" title="AccelerationsTestPlugin" class="md-nav__link">
      AccelerationsTestPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::CustomBatteryConsumerROSPlugin/" title="CustomBatteryConsumerROSPlugin" class="md-nav__link">
      CustomBatteryConsumerROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/uuv_simulator_ros::FinROSPlugin/" title="FinROSPlugin" class="md-nav__link">
      FinROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/uuv_simulator_ros::JointStatePublisher/" title="JointStatePublisher" class="md-nav__link">
      JointStatePublisher
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::LinearBatteryROSPlugin/" title="LinearBatteryROSPlugin" class="md-nav__link">
      LinearBatteryROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/uuv_simulator_ros::ThrusterROSPlugin/" title="ThrusterROSPlugin" class="md-nav__link">
      ThrusterROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/uuv_simulator_ros::UnderwaterObjectROSPlugin/" title="UnderwaterObjectROSPlugin" class="md-nav__link">
      UnderwaterObjectROSPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-3" type="checkbox" id="nav-5-5-3">
    
    <label class="md-nav__link" for="nav-5-5-3">
      uuv_sensor_ros_plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-5-3">
        uuv_sensor_ros_plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ROSBasePlugin/" title="ROSBasePlugin" class="md-nav__link">
      ROSBasePlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ROSBaseModelPlugin/" title="ROSBaseModelPlugin" class="md-nav__link">
      ROSBaseModelPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::ROSBaseSensorPlugin/" title="ROSBaseSensorPlugin" class="md-nav__link">
      ROSBaseSensorPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::CPCROSPlugin/" title="CPCROSPlugin" class="md-nav__link">
      CPCROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::DVLROSPlugin/" title="DVLROSPlugin" class="md-nav__link">
      DVLROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::GazeboRosImageSonar/" title="GazeboRosImageSonar" class="md-nav__link">
      GazeboRosImageSonar
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::GPSROSPlugin/" title="GPSROSPlugin" class="md-nav__link">
      GPSROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-3-8" type="checkbox" id="nav-5-5-3-8">
    
    <label class="md-nav__link" for="nav-5-5-3-8">
      IMUROSPlugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-5-3-8">
        IMUROSPlugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::IMUParameters/" title="IMUParameters" class="md-nav__link">
      IMUParameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::IMUROSPlugin/" title="IMUROSPlugin" class="md-nav__link">
      IMUROSPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-3-9" type="checkbox" id="nav-5-5-3-9">
    
    <label class="md-nav__link" for="nav-5-5-3-9">
      MagnetometerROSPlugin
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-5-5-3-9">
        MagnetometerROSPlugin
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::MagnetometerParameters/" title="MagnetometerParameters" class="md-nav__link">
      MagnetometerParameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::MagnetometerROSPlugin/" title="MagnetometerROSPlugin" class="md-nav__link">
      MagnetometerROSPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::PoseGTROSPlugin/" title="PoseGTROSPlugin" class="md-nav__link">
      PoseGTROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::RPTROSPlugin/" title="RPTROSPlugin" class="md-nav__link">
      RPTROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::SubseaPressureROSPlugin/" title="SubseaPressureROSPlugin" class="md-nav__link">
      SubseaPressureROSPlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::UnderwaterCameraROSPlugin/" title="UnderwaterCameraROSPlugin" class="md-nav__link">
      UnderwaterCameraROSPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-4" type="checkbox" id="nav-5-5-4">
    
    <label class="md-nav__link" for="nav-5-5-4">
      uuv_world_plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-5-4">
        uuv_world_plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::GaussMarkovProcess/" title="GaussMarkovProcess" class="md-nav__link">
      GaussMarkovProcess
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::UnderwaterCurrentPlugin/" title="UnderwaterCurrentPlugin" class="md-nav__link">
      UnderwaterCurrentPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5-5" type="checkbox" id="nav-5-5-5">
    
    <label class="md-nav__link" for="nav-5-5-5">
      uuv_world_ros_plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-5-5">
        uuv_world_ros_plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/gazebo::SphericalCoordinatesROSInterfacePlugin/" title="SphericalCoordinatesROSInterfacePlugin" class="md-nav__link">
      SphericalCoordinatesROSInterfacePlugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../api/uuv_simulator_ros::UnderwaterCurrentROSPlugin/" title="UnderwaterCurrentROSPlugin" class="md-nav__link">
      UnderwaterCurrentROSPlugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6" type="checkbox" id="nav-5-6">
    
    <label class="md-nav__link" for="nav-5-6">
      Python API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-6">
        Python API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6-1" type="checkbox" id="nav-5-6-1">
    
    <label class="md-nav__link" for="nav-5-6-1">
      uuv_auv_control_allocator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-6-1">
        uuv_auv_control_allocator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_api/uuv_auv_actuator_interface/" title="uuv_auv_actuator_interface" class="md-nav__link">
      uuv_auv_actuator_interface
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6-2" type="checkbox" id="nav-5-6-2">
    
    <label class="md-nav__link" for="nav-5-6-2">
      uuv_control_cascaded_pids
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-6-2">
        uuv_control_cascaded_pids
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_api/PID/" title="PID" class="md-nav__link">
      PID
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6-3" type="checkbox" id="nav-5-6-3">
    
    <label class="md-nav__link" for="nav-5-6-3">
      uuv_thruster_manager
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-6-3">
        uuv_thruster_manager
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_api/uuv_thrusters/" title="uuv_thrusters" class="md-nav__link">
      uuv_thrusters
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-6-4" type="checkbox" id="nav-5-6-4">
    
    <label class="md-nav__link" for="nav-5-6-4">
      uuv_trajectory_control
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-6-4">
        uuv_trajectory_control
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_api/uuv_control_interfaces/" title="uuv_control_interfaces" class="md-nav__link">
      uuv_control_interfaces
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_api/uuv_trajectory_generator/" title="uuv_trajectory_generator" class="md-nav__link">
      uuv_trajectory_generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../python_api/uuv_waypoints/" title="uuv_waypoints" class="md-nav__link">
      uuv_waypoints
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Plume Simulator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Plume Simulator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/user_guide/introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/user_guide/how_to_start_a_turbulent_plume/" title="How to start a turbulent passive plume" class="md-nav__link">
      How to start a turbulent passive plume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/user_guide/add_cpc_sensor_to_model/" title="Add CPC sensor model to simulated vehicle" class="md-nav__link">
      Add CPC sensor model to simulated vehicle
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-3" type="checkbox" id="nav-6-3">
    
    <label class="md-nav__link" for="nav-6-3">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-3">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/packages/uuv_plume_simulator/" title="uuv_plume_simulator" class="md-nav__link">
      uuv_plume_simulator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/packages/uuv_cpc_sensor/" title="uuv_cpc_sensor" class="md-nav__link">
      uuv_cpc_sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/packages/uuv_plume_msgs/" title="uuv_plume_msgs" class="md-nav__link">
      uuv_plume_msgs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4">
    
    <label class="md-nav__link" for="nav-6-4">
      C++ API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        C++ API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/api/uuv_plume_simulator::CPCSensor/" title="CPCSensor" class="md-nav__link">
      CPCSensor
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Python API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Python API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5-1" type="checkbox" id="nav-6-5-1">
    
    <label class="md-nav__link" for="nav-6-5-1">
      uuv_plume_simulator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-1">
        uuv_plume_simulator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/python_api/uuv_gm_process/" title="uuv_gm_process" class="md-nav__link">
      uuv_gm_process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../uuv_plume_simulator/docs/python_api/uuv_plume_model/" title="uuv_plume_model" class="md-nav__link">
      uuv_plume_model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      RexROV 2
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        RexROV 2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../rexrov2/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../rexrov2/docs/packages/rexrov2_control/" title="rexrov2_control" class="md-nav__link">
      rexrov2_control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../rexrov2/docs/packages/rexrov2_description/" title="rexrov2_description" class="md-nav__link">
      rexrov2_description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../rexrov2/docs/packages/rexrov2_gazebo/" title="rexrov2_gazebo" class="md-nav__link">
      rexrov2_gazebo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      ECA A9
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        ECA A9
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../eca_a9/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-2" type="checkbox" id="nav-8-2">
    
    <label class="md-nav__link" for="nav-8-2">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-8-2">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../eca_a9/docs/packages/eca_a9_control/" title="eca_a9_control" class="md-nav__link">
      eca_a9_control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../eca_a9/docs/packages/eca_a9_description/" title="eca_a9_description" class="md-nav__link">
      eca_a9_description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../eca_a9/docs/packages/eca_a9_gazebo/" title="eca_a9_gazebo" class="md-nav__link">
      eca_a9_gazebo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      LAUV
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        LAUV
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lauv_gazebo/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lauv_gazebo/docs/packages/lauv_control/" title="lauv_control" class="md-nav__link">
      lauv_control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lauv_gazebo/docs/packages/lauv_description/" title="lauv_description" class="md-nav__link">
      lauv_description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../lauv_gazebo/docs/packages/lauv_gazebo/" title="lauv_gazebo" class="md-nav__link">
      lauv_gazebo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Desistek SAGA ROV
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Desistek SAGA ROV
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../desistek_saga/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-2" type="checkbox" id="nav-10-2">
    
    <label class="md-nav__link" for="nav-10-2">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-2">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../desistek_saga/docs/packages/desistek_saga_control/" title="desistek_saga_control" class="md-nav__link">
      desistek_saga_control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../desistek_saga/docs/packages/desistek_saga_description/" title="desistek_saga_description" class="md-nav__link">
      desistek_saga_description
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../desistek_saga/docs/packages/desistek_saga_gazebo/" title="desistek_saga_gazebo" class="md-nav__link">
      desistek_saga_gazebo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../../bibliography/" title="Useful bibliography and other sources" class="md-nav__link">
      Useful bibliography and other sources
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-the-custom-controller-package" title="Creating the custom controller package" class="md-nav__link">
    Creating the custom controller package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-controller-node" title="Creating the controller node" class="md-nav__link">
    Creating the controller node
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-launch-files" title="Configuring the launch files" class="md-nav__link">
    Configuring the launch files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-package" title="Configuring the package" class="md-nav__link">
    Configuring the package
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-simulation" title="Running the simulation" class="md-nav__link">
    Running the simulation
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/uuvsimulator/edit/master/docs/packages/uuv_simulator/docs/tutorials/creating_new_dp_controller.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Creating new dynamic positioning controller</h1>
                
                <p>To facilitate the implementation of new control algorithms for the vehicle modelled in this package, a few Python modules were created as an interface to the vehicle's thruster manager, the local planner and setup the necessary publishers and subscribers needed to receive trajectory messages and send thruster commands. 
The module also includes an implementation of Fossen's equations of motion that can be used by model-based controllers. 
To create a controller based on this Python modules, see the following steps. All the files discussed below are available in the package <a href="https://github.com/uuvsimulator/uuv_simulator/tree/master/uuv_tutorials/uuv_tutorial_dp_controller"><code class="codehilite">uuv_tutorial_dp_controller</code></a> in the <a href="https://github.com/uuvsimulator/uuv_simulator/tree/master/uuv_tutorials">uuv_tutorials</a> folder. 
Remember to change the name of the package when developing your own module to avoid conflicts when compiling the catkin workspace.</p>
<h4 id="creating-the-custom-controller-package">Creating the custom controller package<a class="headerlink" href="#creating-the-custom-controller-package" title="Permanent link">&para;</a></h4>
<p>First, a new catkin package will be created to include the scripts and launch files necessary for this implementation. Replace the name of the catkin workspace <code class="codehilite">catkin_ws</code> below if yours is named differently.</p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src
catkin_create_pkg uuv_tutorial_dp_controller
</pre></div>

<p>This command will create the necessary files for the new package which will be edited further on in this tutorial. Next, two folders are needed, one <code class="codehilite">launch</code> folder to the launch files and one <code class="codehilite">scripts</code> folder, where the implementation of the custom controller will be stored. </p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src/uuv_tutorial_dp_controller
mkdir launch scripts
</pre></div>

<h4 id="creating-the-controller-node">Creating the controller node<a class="headerlink" href="#creating-the-controller-node" title="Permanent link">&para;</a></h4>
<p>In the <code class="codehilite">scripts</code> folder, a Python file has to be created, here we will name it <code class="codehilite">tutorial_dp_controller.py</code>. </p>
<div class="codehilite"><pre><span></span>touch scripts/tutorial_dp_controller.py
</pre></div>

<p>This file will have the implementation of the controller named <code class="codehilite">TutorialDPController</code>, a very simple PID controller, as shown below.</p>
<div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">uuv_control_interfaces</span> <span class="kn">import</span> <span class="n">DPControllerBase</span>

<span class="k">class</span> <span class="nc">TutorialDPController</span><span class="p">(</span><span class="n">DPControllerBase</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">TutorialDPController</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_Kp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_Kd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_Ki</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_int</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,))</span>

      <span class="bp">self</span><span class="o">.</span><span class="n">_error_pose</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,))</span>

       <span class="c1"># Do the same for the other two matrices</span>
      <span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Kp&#39;</span><span class="p">):</span>
          <span class="n">diag</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Kp&#39;</span><span class="p">)</span>
          <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">_Kp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span>
              <span class="k">print</span> <span class="s1">&#39;Kp=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Kp</span>
          <span class="k">else</span><span class="p">:</span>
              <span class="c1"># If the vector provided has the wrong dimension, raise an exception</span>
              <span class="k">raise</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSException</span><span class="p">(</span><span class="s1">&#39;For the Kp diagonal matrix, 6 coefficients are needed&#39;</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Kd&#39;</span><span class="p">):</span>
          <span class="n">diag</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Kd&#39;</span><span class="p">)</span>
          <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">_Kd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span>
              <span class="k">print</span> <span class="s1">&#39;Kd=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Kd</span>
          <span class="k">else</span><span class="p">:</span>
              <span class="c1"># If the vector provided has the wrong dimension, raise an exception</span>
              <span class="k">raise</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSException</span><span class="p">(</span><span class="s1">&#39;For the Kd diagonal matrix, 6 coefficients are needed&#39;</span><span class="p">)</span>

      <span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Ki&#39;</span><span class="p">):</span>
          <span class="n">diag</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Ki&#39;</span><span class="p">)</span>
          <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
              <span class="bp">self</span><span class="o">.</span><span class="n">_Ki</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span>
              <span class="k">print</span> <span class="s1">&#39;Ki=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Ki</span>
          <span class="k">else</span><span class="p">:</span>
              <span class="c1"># If the vector provided has the wrong dimension, raise an exception</span>
              <span class="k">raise</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSException</span><span class="p">(</span><span class="s1">&#39;For the Ki diagonal matrix, 6 coefficients are needed&#39;</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_is_init</span> <span class="o">=</span> <span class="bp">True</span>

  <span class="k">def</span> <span class="nf">_reset_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">TutorialDPController</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_reset_controller</span><span class="p">()</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_error_pose</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,))</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_int</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,))</span>

  <span class="k">def</span> <span class="nf">update_controller</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_init</span><span class="p">:</span>
          <span class="k">return</span> <span class="bp">False</span>

      <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">odom_is_init</span><span class="p">:</span>
          <span class="k">return</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_int</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">error_pose_euler</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_error_pose</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dt</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_error_pose</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_pose_euler</span>
      <span class="n">tau</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Kp</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_pose_euler</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Kd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span><span class="p">[</span><span class="s1">&#39;vel&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_Ki</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">publish_control_wrench</span><span class="p">(</span><span class="n">tau</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Tutorial - DP Controller&#39;</span><span class="p">)</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;tutorial_dp_controller&#39;</span><span class="p">)</span>

  <span class="k">try</span><span class="p">:</span>
      <span class="n">node</span> <span class="o">=</span> <span class="n">TutorialDPController</span><span class="p">()</span>
      <span class="n">rospy</span><span class="o">.</span><span class="n">spin</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s1">&#39;caught exception&#39;</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s1">&#39;exiting&#39;</span><span class="p">)</span>
</pre></div>

<p>Analyzing the file in detail, for the controller to use the controller modules from <a href="https://github.com/uuvsimulator/uuv_simulator/tree/master/uuv_control/uuv_trajectory_control/src/uuv_control_interfaces"><code class="codehilite">uuv_control_interfaces</code></a>, it has to inherit the <code class="codehilite">DPControllerBase</code> class and initialize it</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">TutorialDPController</span><span class="p">(</span><span class="n">DPControllerBase</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="nb">super</span><span class="p">(</span><span class="n">TutorialDPController</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

<p>This will setup the super class to initialize, for example, odometry message subscribers and thruster manager topic publishers.
For model-based controllers, the super class constructor has to be called as</p>
<div class="codehilite"><pre><span></span><span class="nb">super</span><span class="p">(</span><span class="n">TutorialDPController</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_model_based</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

<p>The controller's parameters, in this case <span><span class="MathJax_Preview">K_p</span><script type="math/tex">K_p</script></span>, <span><span class="MathJax_Preview">K_d</span><script type="math/tex">K_d</script></span> and <span><span class="MathJax_Preview">K_i</span><script type="math/tex">K_i</script></span> should retrieved from the parameter server to allow the controller to be used in different configurations. One alternative is to read this information from the node's private parameter namespace as shown below. 
This is done by adding a <code class="codehilite">~</code> in front of the parameters's tag. The parameter has to be provided at the controller's launch file accordingly, which will be discussed later on.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Kd&#39;</span><span class="p">):</span>
  <span class="n">diag</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s1">&#39;~Kd&#39;</span><span class="p">)</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">_Kd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span><span class="n">diag</span><span class="p">)</span>
      <span class="k">print</span> <span class="s1">&#39;Kd=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_Kd</span>
  <span class="k">else</span><span class="p">:</span>
      <span class="c1"># If the vector provided has the wrong dimension, raise an exception</span>
      <span class="k">raise</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSException</span><span class="p">(</span><span class="s1">&#39;For the Kd diagonal matrix, 6 coefficients are needed&#39;</span><span class="p">)</span>
</pre></div>

<p>The <code class="codehilite">_reset_controller</code> method can be overriden in case internal variables must be reset when the reset service call is received.
It is important to also call the super class' reset method as seen below to ensure that error and reference vectors are also going to be cleared.</p>
<div class="codehilite"><pre><span></span>  <span class="nb">super</span><span class="p">(</span><span class="n">TutorialDPController</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">_reset_controller</span><span class="p">()</span>
</pre></div>

<p>When using the super class <code class="codehilite">DPControllerBase</code>, there is no need to add an controller update sequence or a timer. 
Once the method <code class="codehilite">update_controller</code> is implemented in the controller class, it will be given as a callback function to the odometry update method.
This update method should include the controller's algorithm and generate the control effort vector (in this case <span><span class="MathJax_Preview">\tau</span><script type="math/tex">\tau</script></span>) and use the super class function <code class="codehilite">publish_control_wrench</code> to publish it to the thruster manager input.</p>
<p>The last part of the file is necessary for the ROS node to be executed.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Tutorial - DP Controller&#39;</span><span class="p">)</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;tutorial_dp_controller&#39;</span><span class="p">)</span>

  <span class="k">try</span><span class="p">:</span>
      <span class="n">node</span> <span class="o">=</span> <span class="n">TutorialDPController</span><span class="p">()</span>
      <span class="n">rospy</span><span class="o">.</span><span class="n">spin</span><span class="p">()</span>
  <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s1">&#39;caught exception&#39;</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="s1">&#39;exiting&#39;</span><span class="p">)</span>
</pre></div>

<h4 id="configuring-the-launch-files">Configuring the launch files<a class="headerlink" href="#configuring-the-launch-files" title="Permanent link">&para;</a></h4>
<p>Once the custom controller is done, you have to turn your Python script into an executable and it can be done as follows, otherwise you will not be able to start the ROS node. </p>
<div class="codehilite"><pre><span></span>chmod u+x tutorial_dp_controller.py
</pre></div>

<p>Next step is to setup the launch file for the new controller. Create a new launch file as follows </p>
<div class="codehilite"><pre><span></span>  <span class="nb">cd</span> ~/catkin_ws/src/uuv_tutorial_dp_controller/launch
  touch start_tutorial_dp_controller.launch
</pre></div>

<p>Edit the file to include the following</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;uuv_name&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;model_name&quot;</span> <span class="na">default=</span><span class="s">&quot;$(arg uuv_name)&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;saturation&quot;</span> <span class="na">default=</span><span class="s">&quot;5000&quot;</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;Kp&quot;</span> <span class="na">default=</span><span class="s">&quot;11993.888,11993.888,11993.888,19460.069,19460.069,19460.069&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;Kd&quot;</span> <span class="na">default=</span><span class="s">&quot;9077.459,9077.459,9077.459,18880.925,18880.925,18880.925&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;Ki&quot;</span> <span class="na">default=</span><span class="s">&quot;321.417,321.417,321.417,2096.951,2096.951,2096.951&quot;</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;output_dir&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find uuv_thruster_manager)/config/$(arg model_name)&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;config_file&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find uuv_thruster_manager)/config/$(arg model_name)/thruster_manager.yaml&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;tam_file&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find uuv_thruster_manager)/config/$(arg model_name)/TAM.yaml&quot;</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">&quot;$(find uuv_thruster_manager)/launch/thruster_manager.launch&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;uuv_name&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg uuv_name)&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;model_name&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg model_name)&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;output_dir&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg output_dir)&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;config_file&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg config_file)&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;tam_file&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg tam_file)&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/include&gt;</span>

  <span class="nt">&lt;group</span> <span class="na">ns=</span><span class="s">&quot;$(arg uuv_name)&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;uuv_control_utils&quot;</span>
            <span class="na">type=</span><span class="s">&quot;trajectory_marker_publisher.py&quot;</span>
            <span class="na">name=</span><span class="s">&quot;trajectory_marker_publisher&quot;</span>
            <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;trajectory&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/trajectory&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;waypoints&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/waypoints&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/node&gt;</span>

      <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;uuv_tutorial_dp_controller&quot;</span>
          <span class="na">type=</span><span class="s">&quot;tutorial_dp_controller.py&quot;</span>
          <span class="na">name=</span><span class="s">&quot;tutorial_dp_controller&quot;</span>
          <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;odom&quot;</span> <span class="na">to=</span><span class="s">&quot;pose_gt&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;trajectory&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/trajectory&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;input_trajectory&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/input_trajectory&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;waypoints&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/waypoints&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;error&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/error&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;reference&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/reference&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;thruster_output&quot;</span> <span class="na">to=</span><span class="s">&quot;thruster_manager/input_stamped&quot;</span><span class="nt">/&gt;</span>
          <span class="nt">&lt;rosparam</span> <span class="na">subst_value=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
              saturation: $(arg saturation)
              Kp: [$(arg Kp)]
              Kd: [$(arg Kd)]
              Ki: [$(arg Ki)]
          <span class="nt">&lt;/rosparam&gt;</span>
      <span class="nt">&lt;/node&gt;</span>
  <span class="nt">&lt;/group&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>

<p>The most important parts of the launch file to notice is that the vehicle namespace <code class="codehilite">uuv_name</code> must always be provided, since the simulation per default will have nodes specific to the operation of each vehicle created inside their namespaces. The thruster manager must also be initialized.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more information on how to setup the thruster manager, check the <a href="../config_thruster_manager/">tutorial about configuration of the thruster manager</a>.</p>
</div>
<p>Finally, the controller node has to be called, along with the correct parameters set by the arguments <span><span class="MathJax_Preview">K_p</span><script type="math/tex">K_p</script></span>, <span><span class="MathJax_Preview">K_d</span><script type="math/tex">K_d</script></span> and <span><span class="MathJax_Preview">K_i</span><script type="math/tex">K_i</script></span> in this example. You can pass this parameters by command line or set default vectors as seen above, but there should be no spaces between commas and values. They have to be set in the <code class="codehilite">rosparam</code> block. The <code class="codehilite">trajectory_marker_publisher</code> is an optional node used only to publish visual markers.</p>
<p>To start a small demonstration using the RexROV vehicle, you can create another launch file as follows </p>
<div class="codehilite"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src/uuv_tutorial_dp_controller/launch
touch start_tutorial_dp_controller_demo.launch
</pre></div>

<p>and initialize a world, the vehicle and the RViz visualization tool as follows</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;launch&gt;</span>
    <span class="c">&lt;!-- This launch file will start the controller nodes with the necessary parameters --&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">    Vehicle namespace: since the simulation can run with multiple vehicle, each vehicle</span>
<span class="c">    is created under a namespace, which is per default equal to the name of vehicle model, but</span>
<span class="c">    can be assigned differently at startup</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;uuv_name&quot;</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!-- Name of the vehicle model: the name of the robot model --&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;model_name&quot;</span> <span class="na">default=</span><span class="s">&quot;$(arg uuv_name)&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!-- Control effort saturation --&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;saturation&quot;</span> <span class="na">default=</span><span class="s">&quot;5000&quot;</span><span class="nt">/&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">    The controller parameters are given below and will be given to the controller node in its</span>
<span class="c">    private namespace. These are vectors and for roslaunch to see this as one argument, there</span>
<span class="c">    can be no spaces between the commas and the floating point values. The default values</span>
<span class="c">    are usually the ones that are going to be used.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;Kp&quot;</span> <span class="na">default=</span><span class="s">&quot;11993.888,11993.888,11993.888,19460.069,19460.069,19460.069&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;Kd&quot;</span> <span class="na">default=</span><span class="s">&quot;9077.459,9077.459,9077.459,18880.925,18880.925,18880.925&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;Ki&quot;</span> <span class="na">default=</span><span class="s">&quot;321.417,321.417,321.417,2096.951,2096.951,2096.951&quot;</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;output_dir&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find uuv_thruster_manager)/config/$(arg model_name)&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;config_file&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find uuv_thruster_manager)/config/$(arg model_name)/thruster_manager.yaml&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;tam_file&quot;</span> <span class="na">default=</span><span class="s">&quot;$(find uuv_thruster_manager)/config/$(arg model_name)/TAM.yaml&quot;</span><span class="nt">/&gt;</span>
    <span class="c">&lt;!--</span>
<span class="c">    For the control vector to be distributed amongst the thrusters, a thruster manager node</span>
<span class="c">    has to be initialized for this specific vehicle. The thruster manager will calculate the</span>
<span class="c">    thruster allocation matrix if none is provided, but it is better if the TAM is stored</span>
<span class="c">    in a YAML file beforehand. Check the tutorial on how to initialize the thruster allocation</span>
<span class="c">    matrix.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">&quot;$(find uuv_thruster_manager)/launch/thruster_manager.launch&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!--</span>
<span class="c">        The thruster manager will use the namespace uuv_name to initialize the node and</span>
<span class="c">        will use the robot&#39;s model_name to search for the YAML file containing the thruster</span>
<span class="c">        allocation matrix.</span>
<span class="c">        --&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;uuv_name&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg uuv_name)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;model_name&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg model_name)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;output_dir&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg output_dir)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;config_file&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg config_file)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">&quot;tam_file&quot;</span> <span class="na">value=</span><span class="s">&quot;$(arg tam_file)&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/include&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">    It is important to start all nodes relative to this vehicle under the vehicle&#39;s</span>
<span class="c">    namespace in order to avoid errors and parameter being initialized in wrong place.</span>
<span class="c">    Most of the nodes per default are going to look for configuration parameters and</span>
<span class="c">    topics under the vehicle&#39;s namespace per default.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;group</span> <span class="na">ns=</span><span class="s">&quot;$(arg uuv_name)&quot;</span><span class="nt">&gt;</span>
        <span class="c">&lt;!--</span>
<span class="c">        This node just reads the trajectory and waypoint topics and publishes visualization</span>
<span class="c">        markers to RViz, but is not essential to the controller&#39;s operation</span>
<span class="c">        --&gt;</span>
        <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;uuv_control_utils&quot;</span>
              <span class="na">type=</span><span class="s">&quot;trajectory_marker_publisher.py&quot;</span>
              <span class="na">name=</span><span class="s">&quot;trajectory_marker_publisher&quot;</span>
              <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;trajectory&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/trajectory&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;waypoints&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/waypoints&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/node&gt;</span>

        <span class="c">&lt;!--</span>
<span class="c">        Start the vehicle controller node. Remember to include this controller&#39;s script</span>
<span class="c">        correctly in the CMakeLists.txt file of your catkin package. This can be done by</span>
<span class="c">        adding the following line in the CMakeLists.txt after the line where catkin_package()</span>
<span class="c">        is given:</span>

<span class="c">        catkin_install_python(PROGRAMS scripts/tutorial_dp_controller.py DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION})</span>

<span class="c">        The scripts/tutorial_dp_controller.py file must also be set as an executable as follows</span>

<span class="c">        &gt;&gt; cd &lt;path_to_ros_package&gt;/scripts</span>
<span class="c">        &gt;&gt; chmod 777 tutorial_dp_controller.py</span>
<span class="c">        --&gt;</span>

        <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;uuv_tutorial_dp_controller&quot;</span>
            <span class="na">type=</span><span class="s">&quot;tutorial_dp_controller.py&quot;</span>
            <span class="na">name=</span><span class="s">&quot;tutorial_dp_controller&quot;</span>
            <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- Remap necessary topics --&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;odom&quot;</span> <span class="na">to=</span><span class="s">&quot;pose_gt&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;trajectory&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/trajectory&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;input_trajectory&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/input_trajectory&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;waypoints&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/waypoints&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;error&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/error&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;reference&quot;</span> <span class="na">to=</span><span class="s">&quot;dp_controller/reference&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;thruster_output&quot;</span> <span class="na">to=</span><span class="s">&quot;thruster_manager/input_stamped&quot;</span><span class="nt">/&gt;</span>
            <span class="c">&lt;!-- Set the controller parameters in the node&#39;s private namespace--&gt;</span>
            <span class="nt">&lt;rosparam</span> <span class="na">subst_value=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
                saturation: $(arg saturation)
                Kp: [$(arg Kp)]
                Kd: [$(arg Kd)]
                Ki: [$(arg Ki)]
            <span class="nt">&lt;/rosparam&gt;</span>
        <span class="nt">&lt;/node&gt;</span>
    <span class="nt">&lt;/group&gt;</span>

    <span class="c">&lt;!--</span>
<span class="c">    Now run the demo file to start a new simulation with this controller</span>

<span class="c">    &gt;&gt; roslaunch uuv_tutorial_dp_controller start_tutorial_dp_controller_demo.launch</span>
<span class="c">    --&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>

<p>Before you can run this demo, the package has to be configured.</p>
<h4 id="configuring-the-package">Configuring the package<a class="headerlink" href="#configuring-the-package" title="Permanent link">&para;</a></h4>
<p>To allow catkin to install all your modules, you can open the <code class="codehilite">CMakeLists.txt</code> file from your catkin package and edit it to look like in the example below.</p>
<div class="codehilite"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.8.3</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">uuv_tutorial_dp_controller</span><span class="p">)</span>

<span class="nb">find_package</span><span class="p">(</span><span class="s">catkin</span> <span class="s">REQUIRED</span><span class="p">)</span>

<span class="nb">catkin_package</span><span class="p">()</span>

<span class="nb">catkin_install_python</span><span class="p">(</span><span class="s">PROGRAMS</span> <span class="s">scripts/tutorial_dp_controller.py</span> <span class="s">DESTINATION</span> <span class="o">${</span><span class="nv">CATKIN_PACKAGE_BIN_DESTINATION</span><span class="o">}</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span><span class="s">DIRECTORY</span> <span class="s">launch</span>
        <span class="s">DESTINATION</span> <span class="o">${</span><span class="nv">CATKIN_PACKAGE_SHARE_DESTINATION</span><span class="o">}</span>
        <span class="s">PATTERN</span> <span class="s2">&quot;*~&quot;</span> <span class="s">EXCLUDE</span><span class="p">)</span>
</pre></div>

<h4 id="running-the-simulation">Running the simulation<a class="headerlink" href="#running-the-simulation" title="Permanent link">&para;</a></h4>
<p>After you compile you workspace again with <code class="codehilite">catkin_make</code> or <code class="codehilite">catkin build</code>, you can run the demo launch file created before. </p>
<div class="codehilite"><pre><span></span>roslaunch uuv_tutorial_dp_controller start_tutorial_dp_controller_demo.launch
</pre></div>

<p>This will start the Gazebo simulator with an instance of the RexROV vehicle with this custom controller being used for positioning.</p>
<p><img alt="RViz view" src="../../images/rviz_view.png" /></p>
<p>You can use one the modules from the <a href="../packages/uuv_simulator/docs/packages/uuv_control_utils.md"><code class="codehilite">uuv_control_utils</code></a> package to send the vehicle some waypoints and see the controller in action. For example, use the <a href="https://github.com/uuvsimulator/uuv_simulator/blob/master/uuv_control/uuv_control_utils/config/example_waypoints.yaml">default list of waypoints</a> and send them to the controller by using </p>
<div class="codehilite"><pre><span></span>roslaunch uuv_control_utils send_waypoints_file.launch uuv_name:<span class="o">=</span>rexrov
</pre></div>

<p>The local planner in <code class="codehilite">uuv_control_interfaces</code> that is used per default by the <code class="codehilite">DPControllerBase</code> class will receive the waypoints and apply a linear interpolation with polynomial blends to generate a path to be followed by the vehicle.</p>
<p><img alt="Waypoint following" src="../../images/waypoint_following.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../create_new_vehicle/" title="Create new vehicle" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Create new vehicle
              </span>
            </div>
          </a>
        
        
          <a href="../disturbances/" title="Generating disturbances" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Generating disturbances
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright (c) 2016-2019 The UUV Simulator Authors
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../../assets/fonts/font-awesome.css">
    
      <a href="https://discourse.ros.org/c/maritime" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/uuvsimulator/" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://discord.gg/zNauF2F" class="md-footer-social__link fa fa-comment"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../../assets/javascripts/application.267712eb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>