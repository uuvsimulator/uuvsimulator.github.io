.. _config_thruster_manager:

Configuring the thruster manager for a new vehicle
==================================================

In order to generate control forces for thruster-actuated vehicles, it is necessary to compute the **thruster allocation matrix**, which will
translate the output of the controller :math:`\boldsymbol{\tau}_C = (f_x, f_y, f_z, \tau_r, \tau_p, \tau_y)^T` represented in the vehicle's body
frame, where :math:`f_i` represents the forces and :math:`\tau_i` represents the torques.

To apply this generalized force vector, it is necessary to distribute the correct thruster commands to the thrusters units so that the resultant
force generated by the thrusters is equal to :math:`\boldsymbol{\tau}_C`, what is done by the thruster allocation matrix.

As explained in :ref:`new_model_actuators`, the simulation expects each thruster unit to have its own unique frame, which enables the use of `tf <http://wiki.ros.org/tf>`_
to lookup the transformation matrix between the vehicle's body frame and each thruster during runtime. Using this possibility, a package called
**uuv_thruster_manager** has been developed to generate the thruster allocation matrix automatically and translating the control vector into
commands to each thruster.
